%html
  %head
    %title "Deal Dashboard"
    =javascript_include_tag '/fluxx_engine/dist/fluxx.engine.full.js'
    =stylesheet_link_tag '/fluxx_engine/theme/default/css/style.css'
    :javascript
      $.extend(true, {
        fluxx: {
          dashboard: {
            'default': {
              name: 'Default',
              'type': 'dashboard',
              data: {
                cards: [
                  {
                    title: 'First',
                    listing: {url: '/foo'}
                  }
                ]
              }
            },
            store: {
              'type': 'server',
              config: {
                index: '/resource/index?type=dashboard',
                get: '/resource/show?type=dashboard',  // Assume id=$id always appended
                get: '/resource/update?type=dashboard' // Assume id=$id always appended
              }
            }
          },

          config: {
          icon_path: '/fluxx_engine/theme/default/images/icons',
          dock: {
                quicklinks: [
                  [
                    {
                      label: 'New Org',
                      url: '#{new_organization_path}',
                      className: 'new-detail',
                      type: 'green small'
                    },
                    {
                      label: 'New User',
                      url: '#{new_user_path}',
                      className: 'new-detail',
                      type: 'green small'
                    },
                    {
                      label: 'New Deal',
                      url: '#{new_deal_path}',
                      className: 'new-detail',
                      type: 'green small'
                    }
                  ],
                  [
                    {
                      label: 'PLUS',
                      url: '#',
                      className: 'noop',
                      type: 'plus small',
                      popup: [
                        '#{link_to 'Org', organizations_path, :class => 'new-listing'}',
                        '#{link_to 'User', users_path, :class => 'new-listing'}',
                        '#{link_to 'Deal', deals_path, :class => 'new-listing'}'
                      ],
                    }
                  ]
                ],
          },
          cards: [
            ]
          }
        }
      });
      jQuery(function($){
        $('body').fluxxStage();
      });
  %body#fluxx
    Loading Dashboard